$(document).ready(function(){var factor=500,factor1=0.45,factor15=0.65,factor175=0.75,quantity10=10,quantity20=20;quantity5=50,height=$("#visota"),width=$("#shirina"),amount=$('#kol'),place=$('#oft'),showmodal=$('#showmodal'),taleerror="Количество не может быть менее 10 шт.",priceid={2:[20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],3:[21,23,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],4:[22,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],5:[23,27,30,33,36,39,42,45,48,51,54,57,60,63,66,69,72,75,78,81,84,87,90,93,96,99,102,105,108,111,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],6:[24,28,32,36,40,44,48,52,56,62,66,70,74,78,82,86,90,94,98,102,106,110,114,118,122,126,130,134,138,142,146,150,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],7:[25,29,34,39,44,48,52,56,62,66,70,74,78,82,86,90,94,98,102,106,110,114,118,122,126,130,134,138,142,146,150,154,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],8:[26,30,36,42,48,52,58,62,68,72,78,82,88,92,98,102,108,112,118,122,128,132,138,142,148,152,158,162,168,172,178,182,188,192,198,0,0,0,0,0,0,0,0,0,0,0,0,0,0],9:[27,31,38,45,52,56,62,69,76,83,89,93,96,99,106,110,116,120,125,129,135,140,146,150,156,160,166,170,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,252,256],10:[28,32,40,48,56,62,68,76,80,88,95,103,110,106,114,118,124,128,132,136,142,148,154,158,164,168,174,178,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,252,256,256,260],11:[29,33,42,51,62,66,72,83,88,100,105,112,116,112,122,126,132,136,139,143,149,156,162,166,172,176,182,186,192,196,200,204,204,208,212,216,220,224,228,232,236,240,244,248,252,256,260,264,268],12:[30,34,44,54,66,70,78,89,95,105,115,118,126,119,130,134,140,144,146,150,156,164,170,174,180,184,190,194,200,204,208,212,216,220,224,228,232,236,240,244,248,252,256,260,264,268,272,276,280],13:[31,35,46,57,70,74,82,93,103,112,118,128,134,126,138,142,148,152,153,157,163,172,178,182,188,192,198,202,208,212,216,220,224,228,232,236,240,244,248,252,256,260,264,268,272,276,280,284,288],14:[32,36,48,60,74,78,88,96,110,116,126,134,140,143,146,150,156,160,162,164,170,180,186,190,196,200,206,210,216,220,224,228,232,236,240,244,248,252,256,260,264,268,272,276,280,284,288,292,296],15:[33,37,50,63,78,82,92,99,106,112,119,126,133,140,154,158,162,168,169,171,177,188,194,198,204,208,214,218,224,228,232,236,240,244,248,252,256,260,264,268,272,276,280,284,288,292,296,300,304],16:[34,38,52,66,82,86,98,106,114,122,130,138,146,154,162,166,170,176,174,178,184,196,202,206,212,216,222,226,232,236,240,244,248,252,256,260,264,268,272,276,280,284,288,292,296,300,304,308,312],17:[35,39,54,69,86,90,102,110,118,126,134,142,150,158,166,174,178,184,181,185,191,204,210,214,220,224,230,234,240,244,248,252,256,260,264,268,272,276,280,284,288,292,296,300,304,308,312,316,320],18:[36,40,56,72,90,94,108,116,124,132,140,148,156,162,170,178,186,192,188,192,198,212,218,222,228,232,238,242,248,252,256,260,264,268,272,276,280,284,288,292,296,300,304,308,312,316,320,324,328],19:[37,41,58,75,94,98,112,120,128,136,144,152,160,168,176,184,192,200,195,199,205,220,226,230,236,240,246,250,256,260,264,268,272,276,280,284,288,292,296,300,304,308,312,316,320,324,328,336,340],20:[38,42,60,78,98,102,118,125,132,139,146,153,160,167,174,181,188,195,202,206,212,228,234,238,244,248,254,258,264,272,278,284,290,296,302,308,314,320,326,332,338,342,348,354,360,366,372,378,384],21:[39,43,62,81,102,106,122,129,136,143,150,157,164,171,178,185,192,199,206,213,219,236,242,246,252,256,262,266,272,282,286,290,294,300,306,312,318,324,330,336,342,348,354,360,366,372,378,384,390],22:[40,44,64,84,106,110,128,135,142,149,156,163,170,177,184,191,198,205,212,219,226,244,250,254,258,264,270,276,282,288,294,300,306,312,318,324,330,336,342,348,354,360,366,372,378,384,390,396,402],23:[41,45,66,87,110,114,132,140,148,156,164,172,180,188,196,204,212,220,228,236,244,252,258,262,266,272,278,282,288,294,300,306,312,318,324,330,336,342,348,354,360,366,372,378,384,390,396,402,408],24:[42,46,68,90,114,118,138,146,154,162,170,178,186,194,202,210,218,226,234,242,250,258,266,270,274,280,286,290,296,302,306,312,320,328,336,344,352,360,368,376,384,392,400,408,416,424,432,440,448],25:[43,47,70,93,118,122,142,150,158,166,174,182,190,198,206,214,222,230,238,246,254,262,270,278,282,288,294,298,304,312,320,328,336,344,352,360,368,376,384,392,400,408,416,424,432,440,448,456,464],26:[44,48,72,96,122,126,148,156,164,172,180,188,196,204,212,220,228,236,244,252,258,266,274,282,290,296,302,306,312,320,328,336,344,352,360,368,376,384,392,400,408,416,424,432,440,448,456,464,472],27:[45,49,74,99,126,130,152,160,168,176,184,192,200,208,216,224,232,240,248,256,264,272,280,288,296,304,312,320,326,328,336,344,352,360,368,376,384,392,400,408,416,424,432,440,448,456,464,472,480],28:[46,50,76,102,130,134,158,166,174,182,190,198,206,214,222,230,238,246,254,262,270,278,286,294,302,310,318,326,334,342,350,358,366,374,382,390,398,406,414,422,430,438,446,454,462,470,478,486,494],29:[47,51,78,105,134,138,162,170,178,186,194,202,210,218,226,234,242,250,258,266,274,282,290,298,306,314,322,330,336,346,354,362,370,378,386,394,402,410,418,426,434,442,450,458,466,474,482,490,498],30:[48,52,80,108,138,142,168,176,184,192,200,208,216,224,232,240,248,256,264,272,280,288,296,304,312,320,328,336,344,350,358,366,374,382,390,398,406,414,422,430,438,446,454,462,470,478,486,494,502]};
	$(document).on('click','input',function(){if($(this).val()=="0") {$(this).val("");}});
	$(document).on('click','#calculate',function(){if(amount.val() < quantity10) {amount.focus();setTimeout(function() {alert(taleerror)}, 100);amount.val(quantity10); return false};if(height.val() < 2 || height.val() > 30) {height.focus();setTimeout(function() {alert("Высота не может быть менее 2 см. или более 30 см.")}, 100);return false};if(width.val() < 2 || width.val() > 50) {width.focus();setTimeout(function() {alert("Ширина не может быть менее 2 см. или более 50 см.")}, 100);return false}place.prop('disabled', false);if(amount.val() >= 50) {ratio=factor1;factor=0;}if(amount.val() >= 20 || amount.val() < 50 ) {ratio=factor15;factor=300;}if(amount.val() >= 10 || amount.val() < 20 ) {ratio=factor175;}totalSum(factor,ratio);});
	$(document).on('click','#oft',function(){if(width.val()>=2&&height.val()>=2&&amount.val()>=quantity10){place.prop('disabled', true);$('#calculate').prop('disabled', true);	$('.sendcalc').slideDown("slow");randonnum = randomNumber();$('#nmbzakaz').val(randonnum);$('.nmbzakaz').html(randonnum);$('.totalsum').html($('#total').val());}else{showmodal.foundation('reveal','open').addClass('tiny').html('<a class="close-reveal-modal">&#215;</a><h4 style="color:#F60">Ошибка!</h4> Заполните все необходимые поля');return false}});});
function randomNumber() {max_random=100001;min_random=999999;var range = max_random - min_random + 1;return Math.floor(Math.random()*range) + min_random;}
function totalSum(factor,ratio) {for(var i in priceid){var prid=priceid[height.val()][width.val()-2]}if(prid==0){showmodal.foundation('reveal','open').addClass('tiny');$("#total").val("0");return false};var tip=new Number($("#tip :selected").val());var summa=Math.ceil(((prid+tip)*amount.val()+factor)*ratio);	$("#tipv").val($("#tip option:selected").index());$("#total").val(summa)}